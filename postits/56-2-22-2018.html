<!DOCTYPE html>
<html>
<head>

	<!-- style -->
	<link rel="stylesheet" href="../css/style.css">

	<!-- favicon -->
	<link rel="icon" href="../things/compass.png">

	<title>56</title>
</head>
<body>

	<a href="../index.html">..</a>

	<br></br>
	
	Part II
	<i>C# Basics, Animation and Player Rotation, Follow Camera</i>

	Unity can accept scripts in C# and in JavaScript. When I heard this I was excited because JavaScript is my favourite language, but I quickly found out it's a bit unlike what I was used to. So I took the opportunity to start C# for the first time. If you've never programmed in C#, don't worry. This is a great way to start learning a new language. Plus, I'm right there with you. If you're familiar with Java, the syntax is similar looking. If you've never programmed in either, don't freak out. Syntactically, they're verbose languages, which might actually be a great when starting because you have a fuller picture. Let's get started by adding a script in Unity that will allow the player to control the frog.

	<br></br>

	First, click on the Player in the Hierarchy pane, then in the Player's Inspector, click "Add Component" > New Script. Set the language to C# and name it to PlayerMovement. It auto-saves in the Assets folder, so move it to the Scripts folder and open it. You'll notice that some skeleton script is already present. In short, these  pieces help run your script for Unity.  C# is an <a href="https://mzdraper.github.io/postits/48-2-14-2018.html">Object Oriented</a> language. But in the context of Unity, just image that each objects is a piece of functionality of the game, like an enemy. The class is the blueprint on how to create that object, you could make five enemies (good luck, player!). The "void Start()" and "void Update()" are methods that run during the start or throughout the game, respectively.

	<br></br>

	Ready to start programming? Below the class and above the Start method, type the following: <br></br>
	<code>
	private Animator playerAnimator;<br>
	private float moveHorizontal;<br>
	private float moveVertical;<br>
	private Vector3 movement;<br></br>
	</code>
	Private makes these variables inaccessible to other classes. The second word of line is a type. The third is the name of the variable written in camel case.

	<br></br>

	Let's now start rotating the player. Go to the Update method and type the following: <code> moveHorizontal = Input.GetAxisRaw("Horizontal")</code>, hit enter and type <code>moveVertical = Input.GetAxisRaw("Vertical")</code>. Input is a class that was imported at the top of the script that has a method called GetAxisRaw; this is how Unity has the keyboard talk to the program. Now, create a variable by hitting enter again and type <code>movement = new Vector3 (moveHorizontal, 0.0f, moveVertical);</code> and save your code. Move back to Unity and save the scene.

	<br></br>

	Next, move to the start method. Type in <code>playerAnimator = GetComponent< Animator > ();</code> so the animation can begin at the start of the game.

	<br></br>

	Now, below the Update method, you'll type your own method by typing the following:<br></br>

	<code>
	void FixedUpdate() { <br>
	&emsp; if (movement != Vector3.zero) { <br>
	&emsp; &emsp; playerAnimation.SetFloat ("Speed", 3f); <br>
	&emsp; } else { <br>
	&emsp; &emsp; playerAnimator.SEtFloat ("Speed", 0f); <br>
	&emsp; }<br>
	}</code>

	<br></br>

	Save your script in the editor and scene. The FixedUpdate is a special method in Unity that deals with objects that are bound by physics. Since the Update method runs throughout, if it were given all this math, it would likely slow down.

	<br></br>

	Return to the list of variables you created near the to of the class and add <code>private float turningSpeed = 20f;</code> and <code>private Rigidbody playerRigidbody;</code>. In the Start method, add <code>playerRigidbody = GetComponent< Rigidbody > ();</code>. Rigidbody makes something more tangible in the game, allowing for actions like collisions or inabilities to run through walls.

	<br></br>

	Quaternions are complex mathematical objects that you don't need to understand in order to use Unity. But it's used instead of x, y and z in order to solve problems of 3D rotations. There are built in methods for Quaternions too. We'll go into this more soon.

	<br></br>

	Return to the FixedUpdate method and type <code>Quaternion targetRotation = Quaternion.LookRotation(movement, Vector3.up)</code>. This will create a target rotation based on the movement vector. Then type <code>Quaternion newRotation = Quaternion.Lerp (playerRigidbody.rotation, targetRotation, turningSpeed * Time.deltaTime);</code> in order to create another rotation that moves from the correct rotation to the target rotation. Finally, type <code>playerRigidbody.MoveRotation(newRotation);</code> to change the player's rotation to a new incremental rotation. Save your code in the text editor and game scene. Press play at the top of Unity and you can now control the frog with your keyboard's arrow keys.

	<br></br>

	Finally, let's make the camera follow the player. To do so, select Main Camera in the Hierarchy pane and hit "Add Component" in the inspector. Name it "FollowCamera," repeat the process to move it to the Scripts folder and open the file to edit. Next, copy the following variables for the class: 

	<br></br>
	<code>
	[SerializeField] <br>
	private Transform player; <br>
	[SerializeField] <br>
	private Vector3 offset;
	private float cameraFollowSpeed = 5f
	</code>
	<br></br>

	<code>[SeralizeField]</code> allows the variable to be used Unity. Save your file and game scene. In the Inspector, you should notice the FollowCamera has a new field called Player. Drag the Player object from Hierarchy and drop it into this field. You'll also notice that Offset has x, y and z input fields, set them to 0, 15 and -5 respectively.

	<br></br>

	As we'll only be using the Update method, you can delete the Start method. In the Update method, type the following inside: 

	<br></br>
	<code>

	Vector3 newPosition = player.position + offset; <br>
	transform.position = Vector3.Lerp(transform.position, newPosition, cameraFollowSpeed * Time.deltaTime);

	</code>
	<br></br>

	Save your script and game scene. Hit play and watch as the camera follows the frog around!

	<br></br>

	Good job on getting this far! I know a new environment can be terrifying, but just think about how much you're learning! But that really makes it all the more exciting! Stay tuned for the next part of this mini-series!
</body>
</html> 
